<meta charset="utf-8">

{% include seo.html %}

{% unless site.atom_feed.hide %}
  <link href="{% if site.atom_feed.path %}{{ site.atom_feed.path }}{% else %}{{ '/feed.xml' | relative_url }}{% endif %}" type="application/atom+xml" rel="alternate" title="{{ site.title }} Feed">
{% endunless %}

{%- comment %} https://docs.google.com/presentation/d/1rmxwWa9P6_xHqonmh5ONXRS-jPc5XKbnv99Rjkhe04s/present {% endcomment -%}
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Preconnect hints for external domains to reduce connection time -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net">
<link rel="preconnect" href="https://cdnjs.cloudflare.com">


<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  {% if site.enable_copy_code_button -%}
    window.enable_copy_code_button = true;
  {%- endif %}
</script>

<!-- Critical CSS for above-the-fold content - inline for fastest render -->
<style>
html{box-sizing:border-box;background-color:#252a34;font-size:16px;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}
*{box-sizing:border-box}
body{margin:0;padding:0;color:#eaeaea;font-family:-apple-system,BlinkMacSystemFont,"Roboto","Segoe UI","Helvetica Neue","Lucida Grande",Arial,sans-serif;line-height:1.5;position:relative;min-height:100%;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
.wrapper{clear:both;margin:0 auto;max-width:100%;padding:0 1em}
@media (min-width: 80em){.wrapper{max-width:1280px}}
.layout--splash .initial-content,.layout--splash .search-content{-webkit-box-flex:1;-ms-flex:1;flex:1}
.page__hero{position:relative;margin-bottom:2em;clear:both;-webkit-animation:intro 0.3s;animation:intro 0.3s}
.page__hero-image{width:100%;height:auto;-ms-interpolation-mode:bicubic}
.page__hero--overlay{position:relative;margin-bottom:2em;padding:3em 0;clear:both;background-size:cover;background-repeat:no-repeat;background-position:center;-webkit-animation:intro 0.3s;animation:intro 0.3s}
.page__hero--overlay .page__hero-caption{position:absolute;top:0;right:0;bottom:0;left:0;background:#000;opacity:0.5;z-index:5}
.page__hero--overlay .page__title,.page__hero--overlay .page__meta,.page__hero--overlay .page__lead,.page__hero--overlay .btn{color:#fff;text-shadow:1px 1px 4px rgba(0,0,0,0.5)}
.page__title{margin-top:0;line-height:1;font-size:1.563em;font-weight:bold}
.page__lead{margin-bottom:1em;font-size:1.125em}
.btn{display:inline-block;margin-bottom:0.25em;padding:0.5em 1em;color:#fff;font-family:-apple-system,BlinkMacSystemFont,"Roboto","Segoe UI","Helvetica Neue","Lucida Grande",Arial,sans-serif;font-size:.75em;font-weight:bold;text-align:center;text-decoration:none;background-color:#00adb5;border-width:0;border-radius:4px;cursor:pointer;transition:all 0.2s ease-in-out}
.btn:hover{background-color:#008a91}
.btn--large{font-size:1em}
.masthead{position:relative;border-bottom:1px solid #51555d;-webkit-animation:intro 0.3s both;animation:intro 0.3s both;z-index:20}
.masthead__inner-wrap{clear:both;margin:0 auto;padding:1em;max-width:100%;display:flex;justify-content:space-between;font-family:-apple-system,BlinkMacSystemFont,"Roboto","Segoe UI","Helvetica Neue","Lucida Grande",Arial,sans-serif}
@media (min-width: 80em){.masthead__inner-wrap{max-width:1280px}}
@-webkit-keyframes intro{0%{opacity:0}100%{opacity:1}}
@keyframes intro{0%{opacity:0}100%{opacity:1}}
</style>

<!-- Full stylesheet - deferred for performance -->
<link rel="preload" href="{{ '/assets/css/main.css' | relative_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}"></noscript>

<!-- Preload hero image for LCP optimization -->
{% if page.header.overlay_image %}
<link rel="preload" as="image" href="{{ page.header.overlay_image | relative_url }}" fetchpriority="high">
{% endif %}
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>

<!-- Font display optimization for performance -->
<style>
@font-face {
  font-family: 'Font Awesome 6 Free';
  font-display: swap;
}
@font-face {
  font-family: 'Font Awesome 6 Brands';
  font-display: swap;
}
@font-face {
  font-family: 'Lato';
  font-display: swap;
}
</style>

 <!-- Highlight.js CSS for syntax highlighting - deferred as non-critical -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"></noscript>

{% if site.head_scripts %}
  {% for script in site.head_scripts %}
    <script src="{{ script | relative_url }}"></script>
  {% endfor %}
{% endif %}


<!-- Cookie Consent with Accept/Decline - Deferred for performance -->
<link rel="preload" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css"></noscript>
<style>
  /* Make cookie banner more prominent and visible */
  .cc-window {
    opacity: 1 !important;
    transform: translateY(0) !important;
    visibility: visible !important;
    min-width: 300px !important;
    max-width: 350px !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5) !important;
    border-radius: 8px !important;
    z-index: 9999 !important;
    padding: 1.5rem !important;
    font-size: 14px !important;
    line-height: 1.4 !important;
  }
  
  .cc-message {
    margin-bottom: 1rem !important;
    display: block !important;
  }
  
  .cc-compliance {
    display: flex !important;
    gap: 0.5rem !important;
    flex-wrap: wrap !important;
  }
  
  .cc-btn {
    padding: 0.5rem 1rem !important;
    border-radius: 4px !important;
    font-weight: bold !important;
    border: none !important;
    cursor: pointer !important;
    font-size: 13px !important;
  }
  
  .cc-allow {
    background: #f1d600 !important;
    color: #000 !important;
  }
  
  .cc-deny {
    background: #666 !important;
    color: #fff !important;
  }
  
  .cc-link {
    color: #f1d600 !important;
    text-decoration: underline !important;
  }
</style>
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" defer></script>
<script>
  window.addEventListener("load", function(){
    window.cookieconsent.initialise({
      palette: {
        popup: { background: "#222" },
        button: { background: "#f1d600" }
      },
      theme: "classic",
      position: "bottom-right",
      type: "opt-in",
      content: {
        message: "We use cookies for analytics to improve your experience. You can accept or decline non-essential cookies.",
        allow: "Accept",
        deny: "Decline",
        link: "Privacy Policy",
        href: "/privacy-policy"
      },
      onStatusChange: function(status, chosenBefore) {
        var type = this.options.type;
        var didConsent = this.hasConsented();
        
        if (didConsent) {
          // User accepted - load analytics
          loadAnalytics();
        } else {
          // User declined - don't load analytics
          console.log('Analytics declined by user');
        }
      }
    });

    // After initialization, find the "Privacy Policy" link and change target to _self
    var learnMoreLink = document.querySelector(".cc-window .cc-link");
    if (learnMoreLink) {
      learnMoreLink.setAttribute("target", "_self");
    }
  });

  // Function to load analytics only when user consents
  function loadAnalytics() {
    // Load Reddit Pixel
    !function(w,d){if(!w.rdt){var p=w.rdt=function(){p.sendEvent?p.sendEvent.apply(p,arguments):p.callQueue.push(arguments)};p.callQueue=[];var t=d.createElement("script");t.src="https://www.redditstatic.com/ads/pixel.js",t.async=!0;var s=d.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}}(window,document);rdt('init','a2_he1ee07fnmdm');rdt('track', 'PageVisit');
    
    // Load Google Tag Manager
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-5QM6MSX6');
  }
</script>

<!-- Analytics scripts now load conditionally based on consent (see cookie consent above) -->
