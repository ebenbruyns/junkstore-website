<div class="testimonials-section">
  <div id="testimonial-display">
    {% for testimonial in site.data.testimonials %}
      <div class="testimonial-item{% if forloop.first %} active{% endif %}" data-index="{{ forloop.index0 }}">
        <blockquote class="testimonial-quote">"{{ testimonial.text }}"</blockquote>
        <cite class="testimonial-author">â€” {{ testimonial.name }}</cite>
      </div>
    {% endfor %}
  </div>
  
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const testimonials = document.querySelectorAll(".testimonial-item");
    let currentIndex = 0;
    let autoRotate;

    function showTestimonial(index) {
      // Hide all testimonials
      testimonials.forEach(t => t.classList.remove("active"));

      // Show selected testimonial
      testimonials[index].classList.add("active");
      currentIndex = index;
    }

    function nextTestimonial() {
      const next = (currentIndex + 1) % testimonials.length;
      showTestimonial(next);
    }

    function startAutoRotate() {
      autoRotate = setInterval(nextTestimonial, 6000);
    }

    function stopAutoRotate() {
      clearInterval(autoRotate);
    }


    // Start auto rotation
    startAutoRotate();
  });
</script>

<style>
  .testimonials-section {
    max-width: 700px;
    margin: 1.5rem auto;
    text-align: center;
    padding: 0 1rem;
  }

  #testimonial-display {
    position: relative;
    height: 180px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  .testimonial-item {
    opacity: 0;
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    transform: translateY(-50%);
    transition: opacity 0.4s ease-in-out;
    padding: 1rem;
    word-wrap: break-word;
    overflow-wrap: break-word;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .testimonial-item.active {
    opacity: 1;
  }

  .testimonial-quote {
    font-size: 1.1rem;
    line-height: 1.5;
    font-style: italic;
    margin: 0 0 0.75rem 0;
    color: #e8e8e8;
    border-left: none;
    padding-left: 0;
  }

  .testimonial-author {
    font-size: 0.9rem;
    color: #b7aeae;
    font-style: normal;
    font-weight: 500;
  }


  @media (max-width: 768px) {
    .testimonials-section {
      margin: 1.5rem auto;
      padding: 0 1.5rem;
    }

    #testimonial-display {
      height: 220px; /* Fixed height for mobile with extra space */
    }

    .testimonial-item {
      padding: 1.5rem 0.5rem;
    }

    .testimonial-quote {
      font-size: 1.05rem; /* Slightly larger for mobile readability */
      line-height: 1.5;
      margin-bottom: 1rem;
    }

    .testimonial-author {
      font-size: 0.95rem; /* Compact author text for mobile */
    }
  }
</style>
